<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Your Repair - DIB-NOW</title>
    <link rel="icon" href="\images\DIB-NOW-512.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">
    <link href="/bootstrap.css" rel="stylesheet">
    <link href="/styles.css" rel="stylesheet">
    <link href="/styles1.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(30px); }
        to { opacity: 1; transform: translateY(0); }
      }
      @keyframes slideIn {
        from { opacity: 0; transform: translateX(-20px); }
        to { opacity: 1; transform: translateX(0); }
      }
      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.05); }
      }
      .fade-in-up { animation: fadeInUp 0.6s ease-out; }
      .slide-in { animation: slideIn 0.6s ease-out; }
      .pulse-animation { animation: pulse 2s infinite; }
      .glass-morphism { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
      .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 min-h-screen">

<!-- Hero Section -->
<div class="relative overflow-hidden bg-gradient-to-r mt-10" style="background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%) !important;">
  <div class="absolute inset-0 bg-black opacity-10"></div>
  <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    <div class="text-center">
      <h1 class="text-3xl md:text-5xl font-bold text-white mb-4 fade-in-up">
        <i class="fas fa-shield-alt mr-3 pulse-animation"></i>Welcome to DibNow Repair Tracking System
      </h1>
      <p class="text-lg md:text-xl text-white mb-4 fade-in-up" style="animation-delay: 0.2s;">
        Monitor your device repair status in real-time with our secure and professional platform.
      </p>
      <div class="flex items-center justify-center gap-4 text-sm md:text-base text-white/90 fade-in-up" style="animation-delay: 0.3s;">
        <span class="flex items-center"><i class="fas fa-lock mr-2"></i>Secure</span>
        <span class="text-white/50">|</span>
        <span class="flex items-center"><i class="fas fa-eye mr-2"></i>Transparent</span>
        <span class="text-white/50">|</span>
        <span class="flex items-center"><i class="fas fa-sync-alt mr-2"></i>Real-Time Updates</span>
      </div>
    </div>
  </div>
</div>

<!-- Search Form -->
<div class="max-w-4xl mx-auto -mt-8 px-4 relative z-10 fade-in-up" style="animation-delay: 0.4s;">
  <div class="glass-morphism rounded-2xl shadow-2xl p-6 border border-white/20">
    <form id="trackingForm" action="" method="GET" class="space-y-4">
      <div class="text-center mb-4">
        <h2 class="text-xl font-bold text-gray-800 mb-2">Track Your Repair Request</h2>
        <p class="text-gray-600 text-sm">Enter your DibNow Tracking ID to view real-time repair status updates</p>
      </div>

      <div class="relative">
        <label for="trackingId" class="block text-sm font-semibold text-gray-700 mb-2">
          <i class="fas fa-hashtag mr-2 text-indigo-600"></i>Tracking ID
        </label>
        <div class="relative">
          <input
            id="trackingId"
            name="trackingId"
            type="text"
            placeholder="Enter your DibNow Tracking ID (e.g., DBN-650A7B8C9)"
            autocomplete="off"
            required
            class="w-full rounded-xl border-2 border-gray-200 pl-10 pr-4 py-3 text-base text-gray-800 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-300 bg-white/80 backdrop-blur-sm"
          />
          <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
        </div>
      </div>

      <button
        type="submit"
        class="w-full group relative px-6 py-3 rounded-xl bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white text-base font-bold shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 overflow-hidden"
      >
        <div class="absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1000"></div>
        <span class="relative flex items-center justify-center">
          <i class="fas fa-search mr-2"></i>
          Track Repair
          <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform duration-300"></i>
        </span>
      </button>

      <!-- Help Text -->
      <div class="mt-4 p-3 bg-blue-50/80 rounded-lg border border-blue-100">
        <h3 class="text-xs font-semibold text-blue-800 mb-1 flex items-center">
          <i class="fas fa-info-circle mr-2"></i>Where to find your DibNow Tracking ID?
        </h3>
        <p class="text-xs text-blue-700">
          Your DibNow Tracking ID was provided via email after your repair registration. Please enter it exactly as received for accurate status updates.
        </p>
      </div>

      <!-- Notice about correct route -->
      <div class="mt-3 p-3 bg-green-50/80 rounded-lg border border-green-100">
        <h3 class="text-xs font-semibold text-green-800 mb-1 flex items-center">
          <i class="fas fa-check-circle mr-2"></i>Important Notice
        </h3>
        <p class="text-xs text-green-700">
          For best experience, please use the official DibNow public tracking portal (<strong>/track</strong>). Avoid using legacy systems that require login.
        </p>
      </div>
    </form>
  </div>
</div>

<!-- Error Messages -->
<% if (typeof error_msg !== 'undefined' && error_msg) { %>
<div class="max-w-4xl mx-auto mt-6 px-4">
  <div class="bg-red-50 border border-red-200 rounded-xl p-4">
    <div class="flex items-center">
      <i class="fas fa-exclamation-circle text-red-500 mr-3"></i>
      <span class="text-red-700 text-sm"><%= error_msg %></span>
    </div>
  </div>
</div>
<% } %>

<!-- Success Messages -->
<% if (typeof success_msg !== 'undefined' && success_msg) { %>
<div class="max-w-4xl mx-auto mt-6 px-4">
  <div class="bg-green-50 border border-green-200 rounded-xl p-4">
    <div class="flex items-center">
      <i class="fas fa-check-circle text-green-500 mr-3"></i>
      <span class="text-green-700 text-sm"><%= success_msg %></span>
    </div>
  </div>
</div>
<% } %>

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/tempusdominus-bootstrap-4@5.39.0/build/js/tempusdominus-bootstrap-4.min.js"></script>
<script src="/js/main.js"></script>

<script>
  // Enhanced tracking page functionality
  document.addEventListener('DOMContentLoaded', function() {
    // Auto-focus on tracking input
    const trackingInput = document.getElementById('trackingId');
    if (trackingInput) {
      trackingInput.focus();

      // Add input formatting for tracking IDs
      trackingInput.addEventListener('input', function(e) {
        // Remove spaces and convert to lowercase for consistency
        let value = e.target.value.replace(/\s/g, '').toLowerCase();
        e.target.value = value;
      });
    }

    // Form submission enhancement
    const trackForm = document.getElementById('trackingForm');
    if (trackForm) {
      trackForm.addEventListener('submit', function(e) {
        const trackingId = document.getElementById('trackingId').value.trim();

        if (!trackingId) {
          e.preventDefault();
          showNotification('Tracking ID Required: Please provide your DibNow Tracking ID to proceed.', 'error');
          return false;
        }

        // Set the form action to include the tracking ID as a query parameter
        this.action = `/track?trackingId=${encodeURIComponent(trackingId)}`;

        // Show loading state
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;
        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Searching...';
        submitBtn.disabled = true;

        // Re-enable after 3 seconds (in case of network issues)
        setTimeout(() => {
          submitBtn.innerHTML = originalText;
          submitBtn.disabled = false;
        }, 3000);
      });
    }

    // Notification system
    window.showNotification = function(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `fixed top-4 right-4 px-4 py-3 rounded-xl shadow-xl z-50 transform translate-x-full transition-transform duration-300 ${
        type === 'success' ? 'bg-green-500 text-white' :
        type === 'error' ? 'bg-red-500 text-white' :
        'bg-blue-500 text-white'
      }`;
      notification.innerHTML = `
        <div class="flex items-center">
          <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} mr-2"></i>
          <span class="text-sm">${message}</span>
        </div>
      `;

      document.body.appendChild(notification);

      // Animate in
      setTimeout(() => {
        notification.style.transform = 'translateX(0)';
      }, 100);

      // Remove after 4 seconds
      setTimeout(() => {
        notification.style.transform = 'translateX(full)';
        setTimeout(() => {
          notification.remove();
        }, 300);
      }, 4000);
    };

    // Add keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      // Ctrl/Cmd + K to focus search
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        if (trackingInput) trackingInput.focus();
      }

      // Escape to clear search
      if (e.key === 'Escape' && trackingInput) {
        trackingInput.value = '';
        trackingInput.blur();
      }
    });
  });
</script>

<!-- Custom styles for tracking page -->
<style>
  .glass-morphism {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }

  /* Enhanced focus styles */
  input:focus, button:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
  }

  /* Smooth transitions */
  * {
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }
</style>

</body>
</html>