<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>In Stock</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="" name="keywords">
    <meta content="" name="description">

    <!-- Favicon -->
        <link rel="icon" href="\images\DIB-NOW-512.png" type="image/x-icon">

    
    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="lib/tempusdominus/css/tempusdominus-bootstrap-4.min.css" rel="stylesheet" />

    <!-- Customized Bootstrap Stylesheet -->
    <link href="bootstrap.css" rel="stylesheet">
    <!-- Template Stylesheet -->
    <link href="styles.css" rel="stylesheet">
    <link href="styles1.css" rel="stylesheet">
    
    <!-- SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
      /* Enhanced Filter Button Styling */
      .filter-btn {
        display: block !important;
        width: 100% !important;
        padding: 12px 16px !important;
        margin: 4px 0 !important;
        border-radius: 12px !important;
        text-decoration: none !important;
        font-weight: 600 !important;
        transition: all 0.3s ease !important;
        border: 2px solid transparent !important;
        position: relative !important;
        overflow: hidden !important;
        box-sizing: border-box !important;
      }

      .filter-btn::before {
        content: '' !important;
        position: absolute !important;
        top: 0 !important;
        left: -100% !important;
        width: 100% !important;
        height: 100% !important;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent) !important;
        transition: left 0.5s !important;
      }

      .filter-btn:hover::before {
        left: 100% !important;
      }

      /* Stock Filter Colors */
      .stock-in {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3) !important;
      }

      .stock-in:hover {
        background: linear-gradient(135deg, #059669 0%, #047857 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4) !important;
        color: white !important;
      }

      .stock-out {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3) !important;
      }

      .stock-out:hover {
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4) !important;
        color: white !important;
      }

      /* Category Filter Colors */
      .category-all {
        background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3) !important;
      }

      .category-all:hover {
        background: linear-gradient(135deg, #4b5563 0%, #374151 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(107, 114, 128, 0.4) !important;
        color: white !important;
      }

      .category-apple {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3) !important;
      }

      .category-apple:hover {
        background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4) !important;
        color: white !important;
      }

      .category-samsung {
        background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(139, 92, 246, 0.3) !important;
      }

      .category-samsung:hover {
        background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(139, 92, 246, 0.4) !important;
        color: white !important;
      }

      .category-oneplus {
        background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(245, 158, 11, 0.3) !important;
      }

      .category-oneplus:hover {
        background: linear-gradient(135deg, #d97706 0%, #b45309 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(245, 158, 11, 0.4) !important;
        color: white !important;
      }

      .category-google {
        background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3) !important;
      }

      .category-google:hover {
        background: linear-gradient(135deg, #059669 0%, #047857 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(16, 185, 129, 0.4) !important;
        color: white !important;
      }

      .category-vivo {
        background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3) !important;
      }

      .category-vivo:hover {
        background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4) !important;
        color: white !important;
      }

      .category-others {
        background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%) !important;
        color: white !important;
        box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3) !important;
      }

      .category-others:hover {
        background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%) !important;
        transform: translateY(-2px) !important;
        box-shadow: 0 6px 20px rgba(239, 68, 68, 0.4) !important;
        color: white !important;
      }

      /* Filter Section Enhancement */
      .shop-filters {
        background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%) !important;
        border-radius: 20px !important;
        padding: 25px !important;
        margin: 20px !important;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1) !important;
      }

      .shop-filters h6 {
        color: #1f2937 !important;
        font-size: 1.1rem !important;
        font-weight: 700 !important;
        margin-bottom: 20px !important;
        padding-bottom: 10px !important;
        border-bottom: 2px solid #e2e8f0 !important;
        position: relative !important;
      }

      .shop-filters h6::after {
        content: '' !important;
        position: absolute !important;
        bottom: -2px !important;
        left: 0 !important;
        width: 50px !important;
        height: 2px !important;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      }

      .filter-btn i {
        margin-right: 10px !important;
        font-size: 1.1rem !important;
        transition: all 0.3s ease !important;
      }

      .filter-btn:hover i {
        transform: scale(1.1) !important;
      }

      /* Enhanced Search Container */
      .search-container {
        position: relative !important;
        margin-bottom: 20px !important;
      }

      .search-icon {
        position: absolute !important;
        left: 15px !important;
        top: 50% !important;
        transform: translateY(-50%) !important;
        color: #6c757d !important;
        z-index: 10 !important;
      }

      .search-input-wrapper {
        position: relative !important;
      }

      .search-input-wrapper input {
        padding-left: 45px !important;
        border-radius: 25px !important;
        background-color: #f8f9fa !important;
        border: 2px solid #e9ecef !important;
        color: #212529 !important;
        font-size: 14px !important;
        transition: all 0.3s ease !important;
      }

      .search-input-wrapper input:focus {
        background-color: #ffffff !important;
        border-color: #667eea !important;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25) !important;
        color: #212529 !important;
      }

      .search-input-wrapper input::placeholder {
        color: #6c757d !important;
      }
      .flex-res{
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 10px !important;
      }
      .hehe{
        display: flex;
        align-items: center;
        gap: 10px;
        flex-wrap: wrap;
      }
      @media screen and (max-width: 767px) {
        .hehe-btn{
          width: 100% !important;
        }
      }

      /* Modal Close Button Hover Effect */
      .close-btn:hover {
        transform: scale(1.1) rotate(90deg);
        box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
      }

      /* Modal Submit Button Hover Effect */
      .btn-submit:hover {
        background: linear-gradient(135deg, #00E676 0%, #00C853 100%);
        transform: translateY(-3px);
        box-shadow: 0 15px 40px rgba(0, 200, 83, 0.5);
        color: #ffffff;
      }

      /* Form Input Focus Effect */
      .form-control:focus, .form-select:focus {
        border-color: rgba(255, 255, 255, 0.8) !important;
        box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.2) !important;
        transform: translateY(-2px);
        background: rgba(255, 255, 255, 0.98) !important;
      }

      /* Colorful Dropdown Styles for Update Modal */
      .brand-select option, .category-select option {
        font-weight: 600;
        padding: 10px;
      }

      /* Brand Dropdown Dynamic Colors */
      .brand-select.brand-Apple { background: linear-gradient(135deg, #007bff 0%, #0056b3 100%) !important; background-image: none !important; color: white !important; border-color: #007bff !important; }
      .brand-select.brand-Samsung { background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%) !important; background-image: none !important; color: white !important; border-color: #6f42c1 !important; }
      .brand-select.brand-Oppo { background: linear-gradient(135deg, #28a745 0%, #218838 100%) !important; background-image: none !important; color: white !important; border-color: #28a745 !important; }
      .brand-select.brand-Xiaomi { background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%) !important; background-image: none !important; color: #333 !important; border-color: #ffc107 !important; }
      .brand-select.brand-OnePlus { background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important; background-image: none !important; color: white !important; border-color: #dc3545 !important; }
      .brand-select.brand-Realme { background: linear-gradient(135deg, #17a2b8 0%, #138496 100%) !important; background-image: none !important; color: white !important; border-color: #17a2b8 !important; }
      .brand-select.brand-Vivo { background: linear-gradient(135deg, #fd7e14 0%, #e8590c 100%) !important; background-image: none !important; color: white !important; border-color: #fd7e14 !important; }

      /* Category Dropdown Dynamic Colors */
      .category-select.category-Mobile { background: linear-gradient(135deg, #28a745 0%, #218838 100%) !important; background-image: none !important; color: white !important; border-color: #28a745 !important; }
      .category-select.category-Used-Mobile { background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%) !important; background-image: none !important; color: #333 !important; border-color: #ffc107 !important; }

      /* Type Dropdown Dynamic Colors */
      .type-select option { font-weight: 600; padding: 10px; }
      .type-select.type-New { background: linear-gradient(135deg, #28a745 0%, #218838 100%) !important; background-image: none !important; color: white !important; border-color: #28a745 !important; }
      .type-select.type-Used { background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%) !important; background-image: none !important; color: #333 !important; border-color: #ffc107 !important; }
      .type-select.type-Return { background: linear-gradient(135deg, #dc3545 0%, #c82333 100%) !important; background-image: none !important; color: white !important; border-color: #dc3545 !important; }
    </style>
    <style>
/* FINAL FIX â€” make sure labels are never pushed off-screen (targeted) */
@media (max-width: 575.98px) {
  /* make the dialog anchored to the viewport edges */
  div[id^="confirmModal"] .modal-dialog,
  div[id^="updateModal"]  .modal-dialog {
    position: fixed !important;
    left: 0 !important;
    right: 0 !important;
    top: 15px !important;
    bottom: 0 !important;
    width: 100% !important;
    max-width: 100% !important;
    margin: 0 !important;
    transform: none !important;
    display: flex !important;
    align-items: stretch !important;
    padding: 0 !important;
  }
  .modal-header{
    padding: 22px 12px;
  }

  /* ensure content uses box-sizing so paddings keep things in-screen */
  div[id^="confirmModal"] .modal-content,
  div[id^="updateModal"]  .modal-content {
    box-sizing: border-box !important;
    width: 100% !important;
    min-height: 100vh !important;
    height: auto !important;
    border-radius: 0 !important;
    padding: 1rem !important;        /* safe inner padding */
    overflow-y: auto !important;
    left: 0 !important;
  }

  /* ensure modal body has horizontal padding so labels never touch viewport edge */
  div[id^="confirmModal"] .modal-body,
  div[id^="updateModal"]  .modal-body {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }

  /* cancel any negative margins on rows/cols inside targeted modals */
  div[id^="confirmModal"] .modal-body .row,
  div[id^="updateModal"]  .modal-body .row {
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  /* make columns stack and keep inner padding; prevents labels going off-screen */
  div[id^="confirmModal"] .modal-body .row > [class*="col-"],
  div[id^="updateModal"]  .modal-body .row > [class*="col-"] {
    flex: 0 0 100% !important;
    max-width: 100% !important;
    padding-left: 0 !important;
    padding-right: 0 !important;
    margin-bottom: .6rem !important;
  }

  /* Ensure labels are visible (no clipping), inputs full width */
  div[id^="confirmModal"] .modal-body .form-label,
  div[id^="updateModal"]  .modal-body .form-label {
    display: block !important;
    overflow: visible !important;
    white-space: normal !important;
    text-overflow: clip !important;
    width: 100% !important;
    margin-bottom: .35rem !important;
    color: #212529 !important;
    font-weight: 600 !important;
  }

  div[id^="confirmModal"] .modal-body input,
  div[id^="confirmModal"] .modal-body select,
  div[id^="confirmModal"] .modal-body textarea,
  div[id^="updateModal"]  .modal-body input,
  div[id^="updateModal"]  .modal-body select,
  div[id^="updateModal"]  .modal-body textarea {
    width: 100% !important;
    box-sizing: border-box !important;
    padding: .5rem .625rem !important;
    margin: 0 !important;
  }

  /* Prevent any absolutely positioned controls from covering the form */
  div[id^="confirmModal"] .position-absolute,
  div[id^="updateModal"]  .position-absolute {
    left: auto !important;
    right: 1rem !important;
    top: auto !important;
    z-index: 3 !important;
  }

  /* Modal footer centered and visible */
  div[id^="confirmModal"] .modal-footer,
  div[id^="updateModal"]  .modal-footer {
    display: flex !important;
    justify-content: center !important;
    gap: .5rem !important;
    flex-wrap: wrap !important;
    padding: .75rem 1rem !important;
  }
}
</style>
</head>
<body>
             <%- include('../par/sidebar.ejs') %>

        <!-- Navbar Start -->
   <%- include('../par/header.ejs') %>
   <%- include('../par/Add_Repair.ejs') %>
  
        <!-- Navbar End -->
         
        <% if (success_msg.length > 0) { %>
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <strong><i class="icon fa fa-check-circle me-2"></i><%= success_msg %></strong> 
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>
        <% if (error_msg.length > 0) { %>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong><%= error_msg %></strong>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>
        
        <div class="body-wrapper">
    <div class="container-fluid">
      <div class="card card-body py-3">
        <div class="row align-items-center">
          <div class="col-12">



            <div class="flex-res">
              <h4 class="mb-4 mb-sm-0 card-title"> In Stock</h4>
                <i class="icon fa-solid fa-shop" style="font-size:17px;padding-left:5px;"></i>
              <nav aria-label="breadcrumb" class="ms-auto">
                <ol class="breadcrumb">
                  <li class="breadcrumb-item d-flex align-items-center">
                    <a class="text-muted text-decoration-none d-flex" href="">
                      <iconify-icon icon="solar:home-2-line-duotone" class="fs-6"></iconify-icon>
                    </a>
                  </li>
                  <li class="breadcrumb-item hehe" aria-current="page">
                    <button class="btn btn-action btn-primary hehe-btn" data-bs-toggle="modal" data-bs-target="#gadgetrModal"><i class="bi bi-clipboard-data"></i> Add Inventory</button>
                    <button class="btn btn-action btn-success hehe-btn" data-bs-toggle="modal" data-bs-target="#categoriesModal"><i class="bi bi-tags"></i> Add Category</button>                    
                    <button class="btn btn-action btn-dark hehe-btn" data-bs-toggle="modal" data-bs-target="#brandModal"><i class="bi bi-box"></i> Add Brand</button>                    
                  </li>
                </ol>
              </nav>
            </div>
          </div>
        </div>
      </div>


      <!-- filters -->
      <div class="card position-relative overflow-hidden">
        <div class="shop-part d-flex w-100">
          <!-- Sidebar Filters -->
          <div class="shop-filters flex-shrink-0 border-end d-none d-lg-block">
            <ul class="list-group pt-2 border-bottom rounded-0">
              <!-- Stock Filters -->
              <h6 class="my-3 mx-4 fw-semibold text-dark">Filter by Stock</h6>
              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn stock-in" href="javascript:void(0)" data-filter="in-stock">
                  <i class="bi bi-check-circle"></i> In Stock
                </a>
              </li>
              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn stock-out" href="javascript:void(0)" data-filter="out-of-stock">
                  <i class="bi bi-x-circle"></i> Out of Stock
                </a>
              </li>
                <!-- Category Filters -->
              <h6 class="my-3 mx-4 fw-semibold text-dark">Filter by Category</h6>

              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn category-all" href="javascript:void(0)" data-filter="all">
                  <i class="fa-regular fa-circle"></i> All
                </a>
              </li>
              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn category-apple" href="javascript:void(0)" data-filter="apple">
                  <i class="bi bi-phone"></i> Apple
                </a>
              </li>
              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn category-samsung" href="javascript:void(0)" data-filter="samsung">
                  <i class="bi bi-phone"></i> Samsung
                </a>
              </li>
              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn category-oneplus" href="javascript:void(0)" data-filter="oneplus">
                  <i class="bi bi-phone"></i> OnePlus
                </a>
              </li>
              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn category-google" href="javascript:void(0)" data-filter="google">
                  <i class="bi bi-phone"></i> Google
                </a>
              </li>
              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn category-vivo" href="javascript:void(0)" data-filter="vivo">
                  <i class="bi bi-phone"></i> Vivo
                </a>
              </li>
              <li class="list-group-item border-0 p-0 mx-4 mb-2 rounded-3">
                <a class="d-flex align-items-center gap-6 list-group-item-action text-dark px-3 py-6 filter-btn category-others" href="javascript:void(0)" data-filter="others">
                  <i class="bi bi-phone"></i> Others
                </a>
              </li>

            </ul>
          </div>
       <!-- filters -->


    <!-- products -->
    <div class="card-body p-4 pb-0">
      <div class="d-flex justify-content-between align-items-center gap-6 mb-4">
        <h5 class="fs-5 mb-0 d-none d-lg-block text-dark">All Products</h5>
        <div class="search-container" style="flex: 1; max-width: 500px;">
          <div style="background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); padding: 15px 20px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0, 51, 204, 0.3);">
            <div class="search-input-wrapper" style="position: relative;">
              <i class="bi bi-search" style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #ffffff; z-index: 10;"></i>
              <input type="text" id="text-srh" class="form-control" placeholder="Search Product" style="padding-left: 45px; border-radius: 10px; border: none; height: 45px; color: #ffffff !important; background: rgba(255, 255, 255, 0.2) !important;">
              <style>#text-srh::placeholder { color: rgba(255, 255, 255, 0.7) !important; }</style>
            </div>
          </div>
        </div>
      </div>
    
      <!-- Product Loop -->
      <div class="row">
        <% products.forEach(items => { %>
          <div class="col-sm-4 col-md-4 col-lg-4 mt-2 mb-2" data-category="<%= items.product_name %>" data-quantity="<%= items.Quantity %>">
            <div class="card overflow-hidden rounded-2 border h-100"> <!-- Added h-100 for equal height -->
              <div class="position-relative">
                <a href="/inStock_details/<%= items.id %>" class="hover-img d-block overflow-hidden">
                  <img 
                    src="<%= items.device_image ? `/uploads/${items.device_image}` : 'images/different mobiles.jpg' %>" 
                    class="product-image card-img-top rounded-0" 
                    alt="product-img"
                    style="height: 200px; object-fit: cover;"> 
                </a>
                <a href="javascript:void(0)" class="text-bg-primary rounded-circle p-2 text-white d-inline-flex position-absolute bottom-0 end-0 mb-n3 me-3" data-bs-toggle="modal" data-bs-target="#updateModal<%= items.id %>">
                  <i class="bi bi-pencil" style="align-items: center; display: flex;"></i>
                </a>
              </div>
              <div class="card-body pt-3 p-3 d-flex flex-column">
                <h6 class="fw-semibold fs-4 text-dark">Product Name: <%= items.product_name %></h6>
                <h6 class="fw-semibold fs-4 text-dark">Retail Price:<%= items.Retail_Price %></h6>
                <h6 class="fw-semibold fs-4 text-dark">Category: <%= items.Category %></h6>
                <h6 class="fw-semibold fs-4 text-dark">Quantity: <%= items.Quantity %></h6>
      
                <% if (items.Quantity > 0) { %>
                  <!-- Flex container for buttons -->
                  <div class="d-flex justify-content-between gap-3 mt-auto"> 
                    <!-- Sold button triggers the modal -->
                    <button type="button" class="badge sell-btn btn btn-success w-50" data-bs-toggle="modal"  data-bs-target="#confirmModal<%= items.id %>"> <i class="fa-solid fa-cart-shopping"></i> Sell  </button>
                    <!-- Delete button -->
                    <form action="/delete/<%= items.id %>" method="POST" class="category-form w-50"> 
                      <button type="submit" class="badge sell-btn btn btn-danger w-100" aria-label="Delete"  style="height: 36px;">
                        <i class="fa-solid fa-trash"></i> Delete
                    </button>
                    
                    </form>
                  </div>
                <% } else { %>
                  <div class="d-flex justify-content-between gap-3 mt-auto"> 
                    <button disabled class="badge out-of-stock btn btn-danger w-50">
                      <i class="fa-solid fa-cart-shopping"></i> Stock Out 
                    </button>
                    <form action="/delete/<%= items.id %>" method="POST" class="category-form w-50"> 
                      <button type="submit" class="badge sell-btn btn btn-danger w-100"> <i class="fa-solid fa-trash"></i> Delete </button>
                    </form>
                  </div>
                <% } %>
              </div>
            </div>
          </div>
        <% }); %>
      </div>

<!-- Confirmation Modal (for Sold button) -->
<% products.forEach(items => { %>
  <div class="modal fade" id="confirmModal<%= items.id %>" tabindex="-1" aria-labelledby="confirmModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-fullscreen-sm-down" style="max-width: 800px;">
      <div class="modal-content" style="background: transparent; border: none;">
        <div class="form-container" style="background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); padding: 50px; border-radius: 25px; box-shadow: 0 30px 100px rgba(0, 0, 0, 0.2); position: relative; backdrop-filter: blur(15px); border: 2px solid rgba(255, 255, 255, 0.3);">
          <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); border: none; border-radius: 50%; color: white; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);">
            <i class="fas fa-times"></i>
          </button>
          <div class="form-header" style="text-align: center; margin-bottom: 35px;">
            <h2 style="font-size: 36px; font-weight: 700; color: #ffffff; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);">Confirm Sale</h2>
            <p style="color: rgba(255, 255, 255, 0.9); font-size: 18px; line-height: 1.5; margin: 0;">Complete the sale information below</p>
          </div>
          <form action="/sell/<%= items.id %>" method="POST">
            <input type="hidden" name="productId" value="<%= items.id %>">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group" style="margin-bottom: 25px;">
                  <label for="fullName" class="form-label" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Full Name</label>
                  <input type="text" class="form-control" name="fullName" required style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group" style="margin-bottom: 25px;">
                  <label for="Number" class="form-label" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Mobile Number</label>
                  <input type="number" class="form-control" name="Number" required style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="form-group" style="margin-bottom: 25px;">
                  <label for="Price" class="form-label" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Price</label>
                  <input type="number" class="form-control" name="Price" required style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group" style="margin-bottom: 25px;">
                  <label for="Type" class="form-label" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Type</label>
                  <select class="form-select type-select" name="Type" required style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px); font-weight: 600;">
                    <option value="New" style="background: #28a745; color: white; font-weight: 600; padding: 10px;">New Product</option>
                    <option value="Used" style="background: #ffc107; color: #333; font-weight: 600; padding: 10px;">Used Product</option>
                    <option value="Return" style="background: #dc3545; color: white; font-weight: 600; padding: 10px;">Return Product</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="form-group" style="margin-bottom: 25px;">
              <label for="Product" class="form-label" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Product Name</label>
              <input type="text" class="form-control" name="Product" value="<%= items.product_name %>" readonly required style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
            </div>
            <button type="submit" class="btn-submit" style="width: 100%; height: 60px; background: linear-gradient(135deg, #00C853 0%, #00B894 100%); border: none; border-radius: 15px; color: #ffffff; font-size: 20px; font-weight: 700; letter-spacing: 1px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 30px rgba(0, 184, 148, 0.4); text-transform: uppercase; margin-top: 1rem;">Confirm</button>
          </form>
        </div>
      </div>
    </div>
  </div>
<% }); %>

</div>
</div>
</div>
</div>
    <!-- footer -->
    <%-include('../par/footer.ejs')%>
    <!-- footer -->

<!-- Add Product  form-->  
<% products.forEach(items => { %>
  <div class="modal fade" id="updateModal<%= items.id %>" tabindex="-1" aria-labelledby="updateModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
      <div class="modal-content" style="background: transparent; border: none;">
        <div class="form-container" style="background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); padding: 50px; border-radius: 25px; box-shadow: 0 30px 100px rgba(0, 0, 0, 0.2); position: relative; backdrop-filter: blur(15px); border: 2px solid rgba(255, 255, 255, 0.3);">
          <button type="button" class="close-btn" data-bs-dismiss="modal" aria-label="Close" style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); border: none; border-radius: 50%; color: white; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);">
            <i class="fas fa-times"></i>
          </button>
          
          <div class="form-header" style="text-align: center; margin-bottom: 35px;">
            <h2 style="font-size: 36px; font-weight: 700; color: #ffffff; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);">Update Product</h2>
            <p style="color: rgba(255, 255, 255, 0.9); font-size: 18px; line-height: 1.5; margin: 0;">Update product information below</p>
          </div>
          
          <form action="/update/<%= items.id %>" method="POST" enctype="multipart/form-data">
            <div class="row">
              <div class="col-md-6" style="margin-bottom: 20px;">
                <label for="product_name" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Product Name</label>
                <input type="text" name="product_name" value="<%= items.product_name %>" class="form-control" id="product_name" required style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
              </div>
              <div class="col-md-6" style="margin-bottom: 20px;">
                <label for="Model" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Model</label>
                <input type="text" name="Model" value="<%= items.Model %>" class="form-control" id="Model" required style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-4" style="margin-bottom: 20px;">
                <label for="brand" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Brand</label>
                <select class="form-select brand-select" name="brand" id="brand" required style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px); font-weight: 600;">
                  <option value="Apple" style="background: #007bff; color: white; font-weight: 600; padding: 10px;">Apple</option>
                  <option value="Samsung" style="background: #6f42c1; color: white; font-weight: 600; padding: 10px;">Samsung</option>
                  <option value="Oppo" style="background: #28a745; color: white; font-weight: 600; padding: 10px;">Oppo</option>
                  <option value="Xiaomi" style="background: #ffc107; color: #333; font-weight: 600; padding: 10px;">Xiaomi</option>
                  <option value="OnePlus" style="background: #dc3545; color: white; font-weight: 600; padding: 10px;">OnePlus</option>
                  <option value="Realme" style="background: #17a2b8; color: white; font-weight: 600; padding: 10px;">Realme</option>
                  <option value="Vivo" style="background: #fd7e14; color: white; font-weight: 600; padding: 10px;">Vivo</option>
                </select>
              </div>
              <div class="col-md-4" style="margin-bottom: 20px;">
                <label for="Category" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Category</label>
                <select class="form-select category-select" name="Category" id="Category" required style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px); font-weight: 600;">
                  <option value="Mobile" style="background: #28a745; color: white; font-weight: 600; padding: 10px;">New Mobile</option>
                  <option value="Used Mobile" style="background: #ffc107; color: #333; font-weight: 600; padding: 10px;">Used Mobile</option>
                </select>
              </div>
              <div class="col-md-4" style="margin-bottom: 20px;">
                <label for="Color" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Color</label>
                <input type="color" name="Color" value="<%= items.Color %>" class="form-control" id="Color" style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 5px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-4" style="margin-bottom: 20px;">
                <label for="Sale_Price" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Sale Price</label>
                <input type="number" value="<%= items.Sale_Price %>" name="Sale_Price" class="form-control" id="Sale_Price" required style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
              </div>
              <div class="col-md-4" style="margin-bottom: 20px;">
                <label for="Retail_Price" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Retail Price</label>
                <input type="number" value="<%= items.Retail_Price %>" name="Retail_Price" class="form-control" id="Retail_Price" required style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
              </div>
              <div class="col-md-4" style="margin-bottom: 20px;">
                <label for="imei_number" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">IMEI Number</label>
                <input type="text" value="<%= items.imei_number %>" name="imei_number" class="form-control" id="imei_number" style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-6" style="margin-bottom: 20px;">
                <label for="Quantity" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Quantity</label>
                <input type="number" name="Quantity" value="<%= items.Quantity %>" class="form-control" id="Quantity" style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
              </div>
              <div class="col-md-6" style="margin-bottom: 20px;">
                <label for="device_image" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Upload Image</label>
                <input type="file" name="device_image" class="form-control" id="device_image" style="width: 100%; height: 50px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 10px 20px; font-size: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
              </div>
            </div>
            
            <div style="margin-bottom: 20px;">
              <label for="gadgetProblem" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 16px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Device Details</label>
              <textarea class="form-control" id="gadgetProblem" name="gadget_problem" rows="3" placeholder="Describe device details" style="width: 100%; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 12px; padding: 15px 20px; font-size: 16px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px); resize: vertical;"><%= items.gadget_problem %></textarea>
            </div>
            
            <button type="submit" class="btn" style="width: 100%; height: 55px; background: linear-gradient(135deg, #00C853 0%, #00B894 100%); border: none; border-radius: 12px; color: #ffffff; font-size: 18px; font-weight: 700; letter-spacing: 1px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 8px 20px rgba(0, 184, 148, 0.3); text-transform: uppercase;">Update Product</button>
          </form>
        </div>
      </div>
    </div>
  </div>
<% }); %>   
   </div>
 

 
 
<!-- End Add Product  form-->

<script>  
  // Filtering functionality
  document.addEventListener("DOMContentLoaded", () => {
    const filterLinks = document.querySelectorAll('.shop-filters a[data-filter]');
    const productCards = document.querySelectorAll('[data-category]');
    const predefinedCategories = ['apple', 'samsung', 'oneplus', 'google', 'vivo'];
  
    filterLinks.forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const filter = link.getAttribute('data-filter').toLowerCase();
  
        productCards.forEach(card => {
          const productCategory = card.getAttribute('data-category').toLowerCase();
          const productQuantity = parseInt(card.getAttribute('data-quantity'));
  
          if (filter === 'all') {
            // Show all products
            card.style.display = '';
          } else if (filter === 'in-stock') {
            // Show only products with stock quantity > 0
            card.style.display = productQuantity > 0 ? '' : 'none';
          } else if (filter === 'out-of-stock') {
            // Show only products with stock quantity = 0
            card.style.display = productQuantity === 0 ? '' : 'none';
          } else if (filter === 'others') {
            // Show products not in predefined categories
            card.style.display = predefinedCategories.includes(productCategory) ? 'none' : '';
          } else {
            // Show products matching the selected category
            card.style.display = productCategory.includes(filter) ? '' : 'none';
          }
        });
      });
    });
  });
  
  // Search functionality
  const searchInput = document.getElementById("text-srh");
  if (searchInput) {
    searchInput.addEventListener("keyup", function() {
      const query = this.value.toLowerCase().trim();
      const productCards = document.querySelectorAll('[data-category]');
  
      productCards.forEach(card => {
        const cardText = card.textContent.toLowerCase();
        
        if (query === '' || cardText.includes(query)) {
          card.style.display = "";
        } else {
          card.style.display = "none";
        }
      });
    });
  }

    // Dynamic dropdown color change for modals
    function initDropdowns() {
      document.querySelectorAll('.brand-select').forEach(select => {
        select.addEventListener('change', function() {
          this.className = 'form-select brand-select brand-' + this.value;
        });
      });

      document.querySelectorAll('.category-select').forEach(select => {
        select.addEventListener('change', function() {
          this.className = 'form-select category-select category-' + this.value.replace(/ /g, '-');
        });
      });

      document.querySelectorAll('.type-select').forEach(select => {
        select.addEventListener('change', function() {
          this.className = 'form-select type-select type-' + this.value;
        });
      });
    }

    initDropdowns();

    // Re-initialize when modals open
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('shown.bs.modal', initDropdowns);
    });
  
  </script>

</body>
        <!-- JavaScript Libraries -->
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="lib/tempusdominus/js/tempusdominus-bootstrap-4.min.js"></script>
        <script src="js/main.js"></script>
</html>


 
