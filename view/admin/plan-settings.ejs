<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
     <link rel="icon" href="public\images\DIB-NOW-512.png" type="image/x-icon">
    
    <!-- Icon Font Stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="/bootstrap.css" rel="stylesheet">
    <!-- Template Stylesheet -->
    <link href="/styles.css" rel="stylesheet">
    <link href="/styles1.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      .table-purple th {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
      }
    </style>
</head>
<body>
     <%- include('../par/sidebar.ejs') %>
      <%- include('../par/header.ejs') %>




     <!-- Tailwind CDN (put this in the <head> of your page) -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Converted to Tailwind CSS with form fields updated to match your model (posts to /post-plan) -->
<div class="main-panel max-w-7xl mx-auto px-4 py-6">
  <div class="page-title mb-10  d-flex flex-column justify-content-center align-items-center">
    <h1 class="flex items-center gap-3 text-4xl font-bold text-gray-800">
      <i class="fas fa-box"></i>
      Package Management
    </h1>
    <p class="text-sm text-gray-500 mt-1">Create and manage internet packages for your customers</p>
  </div>

  <!-- Add New Package Form -->
  <div class="form-container" style="background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); padding: 50px; border-radius: 25px; box-shadow: 0 30px 100px rgba(0, 0, 0, 0.2); max-width: 100%; position: relative; backdrop-filter: blur(15px); border: 2px solid rgba(255, 255, 255, 0.3); margin-bottom: 2rem;">
    <button type="button" class="close-btn" onclick="window.history.back()" style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); border: none; border-radius: 50%; color: white; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3); z-index: 10;">
      <i class="fas fa-times"></i>
    </button>
    <div class="form-header" style="text-align: center; margin-bottom: 35px;">
      <h2 style="font-size: 36px; font-weight: 700; color: #ffffff; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);"><i class="fas fa-plus-circle me-3"></i>Add New Plan</h2>
      <p style="color: rgba(255, 255, 255, 0.9); font-size: 18px; line-height: 1.5; margin: 0;">Create and manage internet packages for your customers</p>
    </div>

    <!-- ACTION changed to /post-plan as requested -->
    <form action="/post-plan" method="POST" class="space-y-4">
      <div class="row">
        <!-- plan_name (simple input) -->
        <div class="col-md-6">
          <div class="form-group" style="margin-bottom: 25px;">
            <label for="plan_name" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Package Name *</label>
            <input type="text" name="plan_name" id="plan_name" required placeholder="e.g., Premium Fiber 100GB" style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
          </div>
        </div>

        <!-- plan_price (simple input) -->
        <div class="col-md-6">
          <div class="form-group" style="margin-bottom: 25px;">
            <label for="plan_price" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Price (PKR) *</label>
            <input type="text" name="plan_price" id="plan_price" required placeholder="2999" style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
          </div>
        </div>

        <!-- plan_limit (simple input) -->
        <div class="col-md-6">
          <div class="form-group" style="margin-bottom: 25px;">
            <label for="plan_limit" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Limit *</label>
            <input type="text" name="plan_limit" id="plan_limit" required placeholder="100 days" style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
          </div>
        </div>

        <!-- repairCustomer (number input) -->
        <div class="col-md-6">
          <div class="form-group" style="margin-bottom: 25px;">
            <label for="repairCustomer" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Repair Customer</label>
            <input type="number" name="repairCustomer" id="repairCustomer" step="1" min="0" placeholder="0" style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
          </div>
        </div>

        <!-- inStock (number input) -->
        <div class="col-md-6">
          <div class="form-group" style="margin-bottom: 25px;">
            <label for="inStock" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">In Stock</label>
            <input type="number" name="inStock" id="inStock" step="1" min="0" placeholder="0" style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
          </div>
        </div>

        <!-- inventory (number input) -->
        <div class="col-md-6">
          <div class="form-group" style="margin-bottom: 25px;">
            <label for="inventory" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Inventory</label>
            <input type="number" name="inventory" id="inventory" step="1" min="0" placeholder="0" style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
          </div>
        </div>

        <!-- teams (number input) -->
        <div class="col-md-6">
          <div class="form-group" style="margin-bottom: 25px;">
            <label for="teams" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Teams</label>
            <input type="number" name="teams" id="teams" step="1" min="0" placeholder="0" style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); transition: all 0.3s ease; outline: none; backdrop-filter: blur(10px);">
          </div>
        </div>

        <!-- sportTicket (checkbox). hidden input ensures false is posted when unchecked -->
        <div class="col-md-6">
          <div class="form-group" style="margin-bottom: 25px; display: flex; align-items: center; gap: 12px; padding-top: 40px;">
            <input type="hidden" name="sportTicket" value="false">
            <input type="checkbox" name="sportTicket" id="sportTicket" value="true" style="width: 24px; height: 24px; border: 2px solid rgba(255, 255, 255, 0.5); border-radius: 6px; cursor: pointer;">
            <label for="sportTicket" style="font-weight: 600; color: #ffffff; font-size: 18px; margin: 0; cursor: pointer; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);">Sport Ticket</label>
          </div>
        </div>
      </div>

      <div>
        <button type="submit" class="btn-submit" style="width: 100%; height: 60px; background: linear-gradient(135deg, #00C853 0%, #00B894 100%); border: none; border-radius: 15px; color: #ffffff; font-size: 20px; font-weight: 700; letter-spacing: 1px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 30px rgba(0, 184, 148, 0.4); text-transform: uppercase; margin-top: 1rem;">
          <i class="fas fa-plus me-2"></i>
          Create Plan
        </button>
      </div>
    </form>
  </div>

  <!-- All Packages Table -->
  <div class="packages-section">
    <div class="section-title flex items-center gap-2 text-lg font-semibold text-gray-800 mb-4">
      <i class="fas fa-list"></i>
      All Packages
    </div>

    <% if (plans && plans.length > 0) { %>
      <!-- Desktop Table (hidden on small screens) -->
      <div class="hidden md:block bg-white shadow-sm rounded-lg overflow-x-auto">
        <table class="packages-table w-full min-w-[900px] table-auto divide-y table-puprle">
          <thead class="bg-gray-50">
            <tr class="table-puprle fw-bold">
              <th  class="fw-bold" style=" background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); color: white;" class="px-4 py-3 text-left text-sm font-medium text-gray-600" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">Package Name</th>
              <th  class="fw-bold"style=" background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); color: white;" class="px-4 py-3 text-left text-sm font-medium text-gray-600">Price</th>
              <th class="fw-bold" style=" background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); color: white;" class="px-4 py-3 text-left text-sm font-medium text-gray-600">Limit</th>
              <th class="fw-bold" style=" background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); color: white;" class="px-4 py-3 text-left text-sm font-medium text-gray-600">Repair Customer</th>
              <th class="fw-bold" style=" background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); color: white;" class="px-4 py-3 text-left text-sm font-medium text-gray-600">In Stock</th>
              <th class="fw-bold" style=" background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); color: white;" class="px-4 py-3 text-left text-sm font-medium text-gray-600">Inventory</th>
              <th class="fw-bold" style=" background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); color: white;" class="px-4 py-3 text-left text-sm font-medium text-gray-600">Teams</th>
              <th class="fw-bold" style=" background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); color: white;" class="px-4 py-3 text-left text-sm font-medium text-gray-600">Action</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-100">
            <% plans.forEach(function(package) { %>
              <tr>
                <td class="px-4 py-3 text-sm text-gray-800"><strong><%= package.plan_name %></strong></td>
                <td class="px-4 py-3 text-sm text-gray-700"><span class="package-price">Rs. <%= package.plan_price %></span></td>
                <td class="px-4 py-3 text-sm text-gray-700"><%= package.plan_limit %></td>
                <td class="px-4 py-3 text-sm text-gray-700"><%= package.repairCustomer %></td>
                <td class="px-4 py-3 text-sm text-gray-700"><%= package.inStock %></td>
                <td class="px-4 py-3 text-sm text-gray-700"><%= package.inventory %></td>
                <td class="px-4 py-3 text-sm text-gray-700"><%= package.teams %></td>
                <td class="px-4 py-3 text-sm text-gray-700 flex items-center gap-2">
  <!-- Edit Package Button -->
  <button onclick="openEditModal('<%= package._id %>')"
    class="btn-edit inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium px-3 py-1 rounded">
    <i class="fas fa-edit"></i> Edit
  </button>

  <!-- Delete Package Form -->
  <form action="/delete-plan/<%= package._id %>" method="POST"
        onsubmit="return confirm('Are you sure you want to delete this package?')" style="display:inline;">
    <input type="hidden" name="_method" value="DELETE">
    <button type="submit" class="btn-delete inline-flex items-center gap-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium px-3 py-1 rounded">
      <i class="fas fa-trash"></i> Delete
    </button>
  </form>
</td>
              </tr>
            <% }); %>
          </tbody>
        </table>
      </div>

      <!-- Mobile Cards (visible on small screens) -->
      <div class="md:hidden space-y-4">
        <% plans.forEach(function(package) { %>
          <div class="mobile-package-card bg-white shadow-sm rounded-lg p-4">
            <h4 class="text-lg font-semibold text-gray-800 mb-2"><%= package.plan_name %></h4>

            <div class="mobile-card-row flex justify-between text-sm text-gray-700 py-1">
              <span class="mobile-card-label font-medium">Price:</span>
              <span class="mobile-card-value mobile-price">Rs. <%= package.plan_price %></span>
            </div>

            <div class="mobile-card-row flex justify-between text-sm text-gray-700 py-1">
              <span class="mobile-card-label font-medium">Speed:</span>
              <span class="mobile-card-value"><%= package.plan_limit %></span>
            </div>

            <div class="mobile-card-row flex justify-between text-sm text-gray-700 py-1">
              <span class="mobile-card-label font-medium">Data:</span>
              <span class="mobile-card-value"><%= package.repairCustomer %></span>
            </div>

            <div class="mobile-card-row flex justify-between text-sm text-gray-700 py-1">
              <span class="mobile-card-label font-medium">Valid Until:</span>
              <span class="mobile-card-value"><%= package.inStock %></span>
            </div>

            <div class="mobile-card-row flex justify-between text-sm text-gray-700 py-1">
              <span class="mobile-card-label font-medium">Device Limit:</span>
              <span class="mobile-card-value"><%= package.inventory %></span>
            </div>

            <div class="mobile-card-row flex justify-between text-sm text-gray-700 py-1">
              <span class="mobile-card-label font-medium">Active Users:</span>
              <span class="mobile-card-value"><%= package.supportTicket || 0 %></span>
            </div>

            <div class="mobile-card-row mt-3">
              <form action="/package/<%= package.id %>?_method=DELETE" method="POST"
                    onsubmit="return confirm('Are you sure you want to delete this package?')" style="width: 100%;">
                <input type="hidden" name="_method" value="DELETE">
                <button type="submit" class="btn-delete w-full inline-flex justify-center items-center gap-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium px-4 py-2 rounded">
                  <i class="fas fa-trash"></i> Delete Package
                </button>
              </form>
            </div>
            <div class="mobile-card-row mt-3">
  <button onclick="openEditModal('<%= package._id %>')" 
          class="btn-edit w-full inline-flex justify-center items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium px-4 py-2 rounded">
    <i class="fas fa-edit"></i> Edit Package
  </button>
</div>


          </div>
        <% }); %>
      </div>

    <% } else { %>
      <div class="no-packages bg-white shadow-sm rounded-lg p-6 text-center">
        <i class="fas fa-box-open text-3xl text-gray-400"></i>
        <h4 class="mt-3 text-lg font-semibold text-gray-800">No packages created yet</h4>
        <p class="text-sm text-gray-500 mt-1">Create your first package using the form above</p>
      </div>
    <% } %>
  </div>
</div>




<!-- Edit Modal -->
<div id="editModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 9999; overflow-y: auto;">
  <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center; padding: 20px;">
    <div class="form-container" style="background: linear-gradient(135deg, #0033cc 0%, #33ccff 100%); padding: 50px; border-radius: 25px; box-shadow: 0 30px 100px rgba(0, 0, 0, 0.2); max-width: 900px; width: 100%; position: relative; backdrop-filter: blur(15px); border: 2px solid rgba(255, 255, 255, 0.3);">
      <button type="button" class="close-btn" onclick="closeEditModal()" style="position: absolute; top: 20px; right: 20px; width: 40px; height: 40px; background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%); border: none; border-radius: 50%; color: white; font-size: 20px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3); z-index: 10;">
        <i class="fas fa-times"></i>
      </button>

      <div class="form-header" style="text-align: center; margin-bottom: 35px;">
        <h2 style="font-size: 36px; font-weight: 700; color: #ffffff; margin-bottom: 10px; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);">
          <i class="fas fa-edit me-3"></i>Edit Plan
        </h2>
        <p style="color: rgba(255, 255, 255, 0.9); font-size: 18px; line-height: 1.5; margin: 0;">Update your existing package details</p>
      </div>

      <form id="editPlanForm" method="POST" class="space-y-4">
        <div class="row">
          <div class="col-md-6">
            <div class="form-group" style="margin-bottom: 25px;">
              <label for="edit_plan_name" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block;">Package Name *</label>
              <input type="text" name="plan_name" id="edit_plan_name" required placeholder="e.g., Premium Fiber 100GB"
                style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); outline: none;">
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group" style="margin-bottom: 25px;">
              <label for="edit_plan_price" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block;">Price (PKR) *</label>
              <input type="text" name="plan_price" id="edit_plan_price" required placeholder="2999"
                style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); outline: none;">
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group" style="margin-bottom: 25px;">
              <label for="edit_plan_limit" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block;">Limit *</label>
              <input type="text" name="plan_limit" id="edit_plan_limit" required placeholder="100 days"
                style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); outline: none;">
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group" style="margin-bottom: 25px;">
              <label for="edit_repairCustomer" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block;">Repair Customer</label>
              <input type="number" name="repairCustomer" id="edit_repairCustomer" placeholder="0"
                style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); outline: none;">
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group" style="margin-bottom: 25px;">
              <label for="edit_inStock" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block;">In Stock</label>
              <input type="number" name="inStock" id="edit_inStock" placeholder="0"
                style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); outline: none;">
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group" style="margin-bottom: 25px;">
              <label for="edit_inventory" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block;">Inventory</label>
              <input type="number" name="inventory" id="edit_inventory" placeholder="0"
                style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); outline: none;">
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group" style="margin-bottom: 25px;">
              <label for="edit_teams" style="font-weight: 600; color: #ffffff; margin-bottom: 12px; font-size: 18px; display: block;">Teams</label>
              <input type="number" name="teams" id="edit_teams" placeholder="0"
                style="width: 100%; height: 60px; border: 2px solid rgba(255, 255, 255, 0.3); border-radius: 15px; padding: 18px 25px; font-size: 18px; background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%); outline: none;">
            </div>
          </div>

          <div class="col-md-6">
            <div class="form-group" style="margin-bottom: 25px; display: flex; align-items: center; gap: 12px; padding-top: 40px;">
              <input type="hidden" name="sportTicket" value="false">
              <input type="checkbox" name="sportTicket" id="edit_sportTicket" value="true"
                style="width: 24px; height: 24px; border: 2px solid rgba(255, 255, 255, 0.5); border-radius: 6px; cursor: pointer;">
              <label for="edit_sportTicket" style="font-weight: 600; color: #ffffff; font-size: 18px; margin: 0; cursor: pointer;">Sport Ticket</label>
            </div>
          </div>
        </div>

        <div>
          <button type="submit" class="btn-submit" style="width: 100%; height: 60px; background: linear-gradient(135deg, #00C853 0%, #00B894 100%); border: none; border-radius: 15px; color: #ffffff; font-size: 20px; font-weight: 700; letter-spacing: 1px; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 10px 30px rgba(0, 200, 83, 0.4); text-transform: uppercase; margin-top: 1rem;">
            <i class="fas fa-save me-2"></i>
            Update Plan
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<script>
function openEditModal(planId) {
  fetch(`/edit-plan/${planId}`)
    .then(res => res.json())
    .then(plan => {
      document.getElementById('edit_plan_name').value = plan.plan_name || '';
      document.getElementById('edit_plan_price').value = plan.plan_price || '';
      document.getElementById('edit_plan_limit').value = plan.plan_limit || '';
      document.getElementById('edit_repairCustomer').value = plan.repairCustomer || '';
      document.getElementById('edit_inStock').value = plan.inStock || '';
      document.getElementById('edit_inventory').value = plan.inventory || '';
      document.getElementById('edit_teams').value = plan.teams || '';
      document.getElementById('edit_sportTicket').checked = plan.sportTicket === 'true';
      document.getElementById('editPlanForm').action = `/update-plan/${planId}`;
      document.getElementById('editModal').style.display = 'block';
    });
}

function closeEditModal() {
  document.getElementById('editModal').style.display = 'none';
}

window.onclick = function(event) {
  const modal = document.getElementById('editModal');
  if (event.target === modal) {
    closeEditModal();
  }
}
</script>




    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Template Javascript -->
<script src="/js/main.js"></script>

  <!-- footer -->
  <%- include('../par/footer.ejs') %>
  <!-- footer -->
</body>
</html>









